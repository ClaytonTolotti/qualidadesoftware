<!DOCTYPE html>
<html lang="en" class="no-js cookie_used_true">
	<head>
		<title>Simulador de Eventos do Protegemed</title>
		<link rel="stylesheet" type="text/css" href="style.css">
		
		<script>
			function getFile(){
			$.ajax({
				type: "GET",
				url: "c:/users/clayton.tolotti/Downloads/teste.txt",
				dataType: "text",
				success: parseTxt
			  });
			}
			function parseTxt(){
				alert("teste")
			}
		</script>
		  <script>
			function sendEvent() {
				var xhttp = new XMLHttpRequest();
				xhttp.open("POST", "http://localhost:8081/protegemed/webservice/operations/post/receive-event", true);
				xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
				xhttp.send("TYPE=01&OUTLET=01&RFID=FFFF0001&OFFSET=2077&GAIN=430003F8&RMS=3E999B0E&MV=00000000&MV2=00000000&UNDER=0000&OVER=0000&DURATION=0000");
			}
		  </script>
		  <script>
				window.onload = function() {
					var fileInput = document.getElementById('fileInput');
					var fileDisplayArea = document.getElementById('fileDisplayArea');
		
					fileInput.addEventListener('change', function(e) {
						var file = fileInput.files[0];
						var textType = /text.*/;

						if (file.type.match(textType)) {
							var reader = new FileReader();

							reader.onload = function(e) {
								fileDisplayArea.innerText = reader.result;
							}

							reader.readAsText(file);	
						} else {
							fileDisplayArea.innerText = "File not supported!"
						}
					});
				}
				
				window.onmouseup = function(){
					getFile();
				}
			</script>
	</head>
	<body>
		<form>
			<label>Formul√°rio para gerar evento</label>
			<input placeholder="type" required="required" type="text">
			<input placeholder="outlet" required="required" type="text">
			<input placeholder="rfid" required="required" type="text">
			<input placeholder="offset" required="required" type="text">
			<input placeholder="gain" required="required" type="text">
			<input placeholder="rms" required="required" type="text">
			<input placeholder="mv" required="required" type="text">
			<input placeholder="mv2" required="required" type="text">
			<input placeholder="under" required="required" type="text">
			<input placeholder="over" required="required" type="text">
			<input placeholder="duration" required="required" type="text">
			<input placeholder="sin" required="required" type="text">
			<input placeholder="cos" required="required" type="text">
			<br>
			<button onclick="sendEvent()">Enviar</button>
			<br>
			<br>
		</form>
		<div id="page-wrapper">
			<h1>Log:</h1>
			<div>
				Selecione o arquivo: 
				<input type="file" id="fileInput">
			</div>
			<pre id="fileDisplayArea"><pre>

		</div>
	</body>
</html>
